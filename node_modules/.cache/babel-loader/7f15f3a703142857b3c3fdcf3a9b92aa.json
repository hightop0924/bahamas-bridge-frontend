{"ast":null,"code":"/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar nextHandle = 1;\nvar RESOLVED = /*@__PURE__*/function () {\n  return /*@__PURE__*/Promise.resolve();\n}();\nvar activeHandles = {};\nfunction findAndClearHandle(handle) {\n  if (handle in activeHandles) {\n    delete activeHandles[handle];\n    return true;\n  }\n  return false;\n}\nexport var Immediate = {\n  setImmediate: function (cb) {\n    var handle = nextHandle++;\n    activeHandles[handle] = true;\n    RESOLVED.then(function () {\n      return findAndClearHandle(handle) && cb();\n    });\n    return handle;\n  },\n  clearImmediate: function (handle) {\n    findAndClearHandle(handle);\n  }\n};\nexport var TestTools = {\n  pending: function () {\n    return Object.keys(activeHandles).length;\n  }\n};","map":{"version":3,"sources":["../../../src/internal/util/Immediate.ts"],"names":[],"mappings":"AAAA;AACA,IAAM,UAAQ,GAAI,CAAA;AAClB,IAAM,QAAA,GAAA,aAA2C,YAAA;EAAA,OAAA,aAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA;AAOjD,IAAA,aAAS,GAAA,CAAA,CAAA;AACP,SAAI,kBAAU,CAAA,MAAe,EAAA;MAC3B,MAAA,IAAO,aAAc,EAAA;IACrB,OAAO,aAAK,CAAA,MAAA,CAAA;IACb,OAAA,IAAA;EACD;EACD,OAAA,KAAA;AAKD;AACE,OAAA,IAAA,SAAA,GAAA;EACE,YAAM,EAAM,SAAA,CAAG,EAAA,EAAU;IACzB,IAAA,MAAA,GAAa,UAAQ,EAAG;IACxB,aAAa,CAAC,MAAA,CAAA,GAAA,IAAM;IACpB,QAAO,CAAA,IAAM,CAAC,YAAA;MAAA,OAAA,kBAAA,CAAA,MAAA,CAAA,IAAA,EAAA,CAAA,CAAA;IAAA,CAAA,CAAA;IACf,OAAA,MAAA;EAED,CAAA;EACE,cAAA,EAAA,SAAA,CAAmB,MAAQ,EAAA;IAC5B,kBAAA,CAAA,MAAA,CAAA;EACD;AAKF,CAAA;AACE,OAAA,IAAO,SAAA,GAAA;EACL,OAAA,EAAA,SAAA,CAAA,EAAc;IACf,OAAA,MAAA,CAAA,IAAA,CAAA,aAAA,CAAA,CAAA,MAAA;EACD","sourcesContent":["/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar nextHandle = 1;\nvar RESOLVED = /*@__PURE__*/ (function () { return /*@__PURE__*/ Promise.resolve(); })();\nvar activeHandles = {};\nfunction findAndClearHandle(handle) {\n    if (handle in activeHandles) {\n        delete activeHandles[handle];\n        return true;\n    }\n    return false;\n}\nexport var Immediate = {\n    setImmediate: function (cb) {\n        var handle = nextHandle++;\n        activeHandles[handle] = true;\n        RESOLVED.then(function () { return findAndClearHandle(handle) && cb(); });\n        return handle;\n    },\n    clearImmediate: function (handle) {\n        findAndClearHandle(handle);\n    },\n};\nexport var TestTools = {\n    pending: function () {\n        return Object.keys(activeHandles).length;\n    }\n};\n//# sourceMappingURL=Immediate.js.map\n"]},"metadata":{},"sourceType":"module"}