{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SubjectSubscriber, _super);\n  function SubjectSubscriber(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    return _this;\n  }\n  return SubjectSubscriber;\n}(Subscriber);\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(Subject, _super);\n  function Subject() {\n    var _this = _super.call(this) || this;\n    _this.observers = [];\n    _this.closed = false;\n    _this.isStopped = false;\n    _this.hasError = false;\n    _this.thrownError = null;\n    return _this;\n  }\n  Subject.prototype[rxSubscriberSymbol] = function () {\n    return new SubjectSubscriber(this);\n  };\n  Subject.prototype.lift = function (operator) {\n    var subject = new AnonymousSubject(this, this);\n    subject.operator = operator;\n    return subject;\n  };\n  Subject.prototype.next = function (value) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    if (!this.isStopped) {\n      var observers = this.observers;\n      var len = observers.length;\n      var copy = observers.slice();\n      for (var i = 0; i < len; i++) {\n        copy[i].next(value);\n      }\n    }\n  };\n  Subject.prototype.error = function (err) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.hasError = true;\n    this.thrownError = err;\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy = observers.slice();\n    for (var i = 0; i < len; i++) {\n      copy[i].error(err);\n    }\n    this.observers.length = 0;\n  };\n  Subject.prototype.complete = function () {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy = observers.slice();\n    for (var i = 0; i < len; i++) {\n      copy[i].complete();\n    }\n    this.observers.length = 0;\n  };\n  Subject.prototype.unsubscribe = function () {\n    this.isStopped = true;\n    this.closed = true;\n    this.observers = null;\n  };\n  Subject.prototype._trySubscribe = function (subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return _super.prototype._trySubscribe.call(this, subscriber);\n    }\n  };\n  Subject.prototype._subscribe = function (subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.isStopped) {\n      subscriber.complete();\n      return Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      return new SubjectSubscription(this, subscriber);\n    }\n  };\n  Subject.prototype.asObservable = function () {\n    var observable = new Observable();\n    observable.source = this;\n    return observable;\n  };\n  Subject.create = function (destination, source) {\n    return new AnonymousSubject(destination, source);\n  };\n  return Subject;\n}(Observable);\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(AnonymousSubject, _super);\n  function AnonymousSubject(destination, source) {\n    var _this = _super.call(this) || this;\n    _this.destination = destination;\n    _this.source = source;\n    return _this;\n  }\n  AnonymousSubject.prototype.next = function (value) {\n    var destination = this.destination;\n    if (destination && destination.next) {\n      destination.next(value);\n    }\n  };\n  AnonymousSubject.prototype.error = function (err) {\n    var destination = this.destination;\n    if (destination && destination.error) {\n      this.destination.error(err);\n    }\n  };\n  AnonymousSubject.prototype.complete = function () {\n    var destination = this.destination;\n    if (destination && destination.complete) {\n      this.destination.complete();\n    }\n  };\n  AnonymousSubject.prototype._subscribe = function (subscriber) {\n    var source = this.source;\n    if (source) {\n      return this.source.subscribe(subscriber);\n    } else {\n      return Subscription.EMPTY;\n    }\n  };\n  return AnonymousSubject;\n}(Subject);\nexport { AnonymousSubject };","map":{"version":3,"sources":["../../src/internal/Subject.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n"]},"metadata":{},"sourceType":"module"}