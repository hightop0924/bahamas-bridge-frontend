{"ast":null,"code":"/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nvar toString = /*@__PURE__*/function () {\n  return Object.prototype.toString;\n}();\nexport function fromEvent(target, eventName, options, resultSelector) {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = undefined;\n  }\n  if (resultSelector) {\n    return fromEvent(target, eventName, options).pipe(map(function (args) {\n      return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args);\n    }));\n  }\n  return new Observable(function (subscriber) {\n    function handler(e) {\n      if (arguments.length > 1) {\n        subscriber.next(Array.prototype.slice.call(arguments));\n      } else {\n        subscriber.next(e);\n      }\n    }\n    setupSubscription(target, eventName, handler, subscriber, options);\n  });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n  var unsubscribe;\n  if (isEventTarget(sourceObj)) {\n    var source_1 = sourceObj;\n    sourceObj.addEventListener(eventName, handler, options);\n    unsubscribe = function () {\n      return source_1.removeEventListener(eventName, handler, options);\n    };\n  } else if (isJQueryStyleEventEmitter(sourceObj)) {\n    var source_2 = sourceObj;\n    sourceObj.on(eventName, handler);\n    unsubscribe = function () {\n      return source_2.off(eventName, handler);\n    };\n  } else if (isNodeStyleEventEmitter(sourceObj)) {\n    var source_3 = sourceObj;\n    sourceObj.addListener(eventName, handler);\n    unsubscribe = function () {\n      return source_3.removeListener(eventName, handler);\n    };\n  } else if (sourceObj && sourceObj.length) {\n    for (var i = 0, len = sourceObj.length; i < len; i++) {\n      setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n    }\n  } else {\n    throw new TypeError('Invalid event target');\n  }\n  subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n  return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n  return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n  return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}","map":{"version":3,"sources":["../../../src/internal/observable/fromEvent.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nvar toString = /*@__PURE__*/ (function () { return Object.prototype.toString; })();\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        function handler(e) {\n            if (arguments.length > 1) {\n                subscriber.next(Array.prototype.slice.call(arguments));\n            }\n            else {\n                subscriber.next(e);\n            }\n        }\n        setupSubscription(target, eventName, handler, subscriber, options);\n    });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n    var unsubscribe;\n    if (isEventTarget(sourceObj)) {\n        var source_1 = sourceObj;\n        sourceObj.addEventListener(eventName, handler, options);\n        unsubscribe = function () { return source_1.removeEventListener(eventName, handler, options); };\n    }\n    else if (isJQueryStyleEventEmitter(sourceObj)) {\n        var source_2 = sourceObj;\n        sourceObj.on(eventName, handler);\n        unsubscribe = function () { return source_2.off(eventName, handler); };\n    }\n    else if (isNodeStyleEventEmitter(sourceObj)) {\n        var source_3 = sourceObj;\n        sourceObj.addListener(eventName, handler);\n        unsubscribe = function () { return source_3.removeListener(eventName, handler); };\n    }\n    else if (sourceObj && sourceObj.length) {\n        for (var i = 0, len = sourceObj.length; i < len; i++) {\n            setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n        }\n    }\n    else {\n        throw new TypeError('Invalid event target');\n    }\n    subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n    return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n//# sourceMappingURL=fromEvent.js.map\n"]},"metadata":{},"sourceType":"module"}