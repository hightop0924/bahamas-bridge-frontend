{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { BaseClient, SDK_VERSION } from '@sentry/core';\nimport { getGlobalObject, logger } from '@sentry/utils';\nimport { BrowserBackend } from './backend';\nimport { IS_DEBUG_BUILD } from './flags';\nimport { injectReportDialog } from './helpers';\nimport { Breadcrumbs } from './integrations';\n/**\n * The Sentry Browser SDK Client.\n *\n * @see BrowserOptions for documentation on configuration options.\n * @see SentryClient for usage documentation.\n */\nvar BrowserClient = /** @class */function (_super) {\n  __extends(BrowserClient, _super);\n  /**\n   * Creates a new Browser SDK instance.\n   *\n   * @param options Configuration options for this SDK.\n   */\n  function BrowserClient(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var _this = this;\n    options._metadata = options._metadata || {};\n    options._metadata.sdk = options._metadata.sdk || {\n      name: 'sentry.javascript.browser',\n      packages: [{\n        name: 'npm:@sentry/browser',\n        version: SDK_VERSION\n      }],\n      version: SDK_VERSION\n    };\n    _this = _super.call(this, BrowserBackend, options) || this;\n    return _this;\n  }\n  /**\n   * Show a report dialog to the user to send feedback to a specific event.\n   *\n   * @param options Set individual options for the dialog\n   */\n  BrowserClient.prototype.showReportDialog = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n    // doesn't work without a document (React Native)\n    var document = getGlobalObject().document;\n    if (!document) {\n      return;\n    }\n    if (!this._isEnabled()) {\n      IS_DEBUG_BUILD && logger.error('Trying to call showReportDialog with Sentry Client disabled');\n      return;\n    }\n    injectReportDialog(__assign(__assign({}, options), {\n      dsn: options.dsn || this.getDsn()\n    }));\n  };\n  /**\n   * @inheritDoc\n   */\n  BrowserClient.prototype._prepareEvent = function (event, scope, hint) {\n    event.platform = event.platform || 'javascript';\n    return _super.prototype._prepareEvent.call(this, event, scope, hint);\n  };\n  /**\n   * @inheritDoc\n   */\n  BrowserClient.prototype._sendEvent = function (event) {\n    var integration = this.getIntegration(Breadcrumbs);\n    if (integration) {\n      integration.addSentryBreadcrumb(event);\n    }\n    _super.prototype._sendEvent.call(this, event);\n  };\n  return BrowserClient;\n}(BaseClient);\nexport { BrowserClient };","map":{"version":3,"sources":["../../../src/client.ts"],"names":[],"mappings":";AAAA,SAAS,UAAU,EAAS,WAAW,QAAQ,cAAc;AAE7D,SAAS,eAAe,EAAE,MAAM,QAAQ,eAAe;AAEvD,SAAS,cAAc,QAAwB,WAAW;AAC1D,SAAS,cAAc,QAAQ,SAAS;AACxC,SAAS,kBAAkB,QAA6B,WAAW;AACnE,SAAS,WAAW,QAAQ,gBAAgB;AAE5C;;;;;AAKG;AACH,IAAA,aAAA,GAAA,aAAA,UAAA,MAAA,EAAA;EAAmC,SAAA,CAAA,aAAA,EAAA,MAAA,CAAA;EACjC;;;;AAIG;EACH,SAAA,aAAA,CAAmB,OAA4B,EAAA;IAA5B,IAAA,OAAA,KAAA,KAAA,CAAA,EAAA;MAAA,OAAA,GAAA,CAAA,CAA4B;IAAA;IAA/C,IAAA,KAAA,GAAA,IAAA;IACE,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,CAAA,CAAE;IAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI;MAC/C,IAAI,EAAE,2BAA2B;MACjC,QAAQ,EAAE,CACR;QACE,IAAI,EAAE,qBAAqB;QAC3B,OAAO,EAAE;OACV,CACF;MACD,OAAO,EAAE;KACV;IAED,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,cAAc,EAAE,OAAO,CAAC,IAAA,IAAA;;EAChC;EAEA;;;;AAIG;EACI,aAAA,CAAA,SAAA,CAAA,gBAAgB,GAAvB,UAAwB,OAAiC,EAAA;IAAjC,IAAA,OAAA,KAAA,KAAA,CAAA,EAAA;MAAA,OAAA,GAAA,CAAA,CAAiC;IAAA;IACvD;IACA,IAAM,QAAQ,GAAG,eAAe,CAAA,CAAU,CAAC,QAAQ;IACnD,IAAI,CAAC,QAAQ,EAAE;MACb;IACD;IAED,IAAI,CAAC,IAAI,CAAC,UAAU,CAAA,CAAE,EAAE;MACtB,cAAc,IAAI,MAAM,CAAC,KAAK,CAAC,6DAA6D,CAAC;MAC7F;IACD;IAED,kBAAkB,CAAA,QAAA,CAAA,QAAA,CAAA,CAAA,CAAA,EACb,OAAO,CAAA,EAAA;MACV,GAAG,EAAE,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC,MAAM,CAAA;IAAE,CAAA,CAAA,CACjC;EACJ,CAAC;EAED;;AAEG;EACO,aAAA,CAAA,SAAA,CAAA,aAAa,GAAvB,UAAwB,KAAY,EAAE,KAAa,EAAE,IAAgB,EAAA;IACnE,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,YAAY;IAC/C,OAAO,MAAA,CAAA,SAAA,CAAM,aAAa,CAAA,IAAA,CAAA,IAAA,EAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;EAChD,CAAC;EAED;;AAEG;EACO,aAAA,CAAA,SAAA,CAAA,UAAU,GAApB,UAAqB,KAAY,EAAA;IAC/B,IAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC;IACpD,IAAI,WAAW,EAAE;MACf,WAAW,CAAC,mBAAmB,CAAC,KAAK,CAAC;IACvC;IACD,MAAA,CAAA,SAAA,CAAM,UAAU,CAAA,IAAA,CAAA,IAAA,EAAC,KAAK,CAAC;EACzB,CAAC;EACH,OAAA,aAAC;AAAD,CAAC,CA/DkC,UAAU,CAAA","sourcesContent":["import { BaseClient, Scope, SDK_VERSION } from '@sentry/core';\nimport { Event, EventHint } from '@sentry/types';\nimport { getGlobalObject, logger } from '@sentry/utils';\n\nimport { BrowserBackend, BrowserOptions } from './backend';\nimport { IS_DEBUG_BUILD } from './flags';\nimport { injectReportDialog, ReportDialogOptions } from './helpers';\nimport { Breadcrumbs } from './integrations';\n\n/**\n * The Sentry Browser SDK Client.\n *\n * @see BrowserOptions for documentation on configuration options.\n * @see SentryClient for usage documentation.\n */\nexport class BrowserClient extends BaseClient<BrowserBackend, BrowserOptions> {\n  /**\n   * Creates a new Browser SDK instance.\n   *\n   * @param options Configuration options for this SDK.\n   */\n  public constructor(options: BrowserOptions = {}) {\n    options._metadata = options._metadata || {};\n    options._metadata.sdk = options._metadata.sdk || {\n      name: 'sentry.javascript.browser',\n      packages: [\n        {\n          name: 'npm:@sentry/browser',\n          version: SDK_VERSION,\n        },\n      ],\n      version: SDK_VERSION,\n    };\n\n    super(BrowserBackend, options);\n  }\n\n  /**\n   * Show a report dialog to the user to send feedback to a specific event.\n   *\n   * @param options Set individual options for the dialog\n   */\n  public showReportDialog(options: ReportDialogOptions = {}): void {\n    // doesn't work without a document (React Native)\n    const document = getGlobalObject<Window>().document;\n    if (!document) {\n      return;\n    }\n\n    if (!this._isEnabled()) {\n      IS_DEBUG_BUILD && logger.error('Trying to call showReportDialog with Sentry Client disabled');\n      return;\n    }\n\n    injectReportDialog({\n      ...options,\n      dsn: options.dsn || this.getDsn(),\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  protected _prepareEvent(event: Event, scope?: Scope, hint?: EventHint): PromiseLike<Event | null> {\n    event.platform = event.platform || 'javascript';\n    return super._prepareEvent(event, scope, hint);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  protected _sendEvent(event: Event): void {\n    const integration = this.getIntegration(Breadcrumbs);\n    if (integration) {\n      integration.addSentryBreadcrumb(event);\n    }\n    super._sendEvent(event);\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}