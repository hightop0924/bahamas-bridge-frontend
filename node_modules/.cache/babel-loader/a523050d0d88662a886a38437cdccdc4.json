{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async;\n  }\n  return function (source) {\n    var absoluteTimeout = isDate(due);\n    var waitFor = absoluteTimeout ? +due - scheduler.now() : Math.abs(due);\n    return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n  };\n}\nvar TimeoutWithOperator = /*@__PURE__*/function () {\n  function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n    this.waitFor = waitFor;\n    this.absoluteTimeout = absoluteTimeout;\n    this.withObservable = withObservable;\n    this.scheduler = scheduler;\n  }\n  TimeoutWithOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n  };\n  return TimeoutWithOperator;\n}();\nvar TimeoutWithSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(TimeoutWithSubscriber, _super);\n  function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.absoluteTimeout = absoluteTimeout;\n    _this.waitFor = waitFor;\n    _this.withObservable = withObservable;\n    _this.scheduler = scheduler;\n    _this.scheduleTimeout();\n    return _this;\n  }\n  TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n    var withObservable = subscriber.withObservable;\n    subscriber._unsubscribeAndRecycle();\n    subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n  };\n  TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n    var action = this.action;\n    if (action) {\n      this.action = action.schedule(this, this.waitFor);\n    } else {\n      this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n    }\n  };\n  TimeoutWithSubscriber.prototype._next = function (value) {\n    if (!this.absoluteTimeout) {\n      this.scheduleTimeout();\n    }\n    _super.prototype._next.call(this, value);\n  };\n  TimeoutWithSubscriber.prototype._unsubscribe = function () {\n    this.action = undefined;\n    this.scheduler = null;\n    this.withObservable = null;\n  };\n  return TimeoutWithSubscriber;\n}(SimpleOuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/operators/timeoutWith.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    return function (source) {\n        var absoluteTimeout = isDate(due);\n        var waitFor = absoluteTimeout ? (+due - scheduler.now()) : Math.abs(due);\n        return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n    };\n}\nvar TimeoutWithOperator = /*@__PURE__*/ (function () {\n    function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n        this.waitFor = waitFor;\n        this.absoluteTimeout = absoluteTimeout;\n        this.withObservable = withObservable;\n        this.scheduler = scheduler;\n    }\n    TimeoutWithOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n    };\n    return TimeoutWithOperator;\n}());\nvar TimeoutWithSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TimeoutWithSubscriber, _super);\n    function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.absoluteTimeout = absoluteTimeout;\n        _this.waitFor = waitFor;\n        _this.withObservable = withObservable;\n        _this.scheduler = scheduler;\n        _this.scheduleTimeout();\n        return _this;\n    }\n    TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n        var withObservable = subscriber.withObservable;\n        subscriber._unsubscribeAndRecycle();\n        subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n    };\n    TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n        var action = this.action;\n        if (action) {\n            this.action = action.schedule(this, this.waitFor);\n        }\n        else {\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n        }\n    };\n    TimeoutWithSubscriber.prototype._next = function (value) {\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n        _super.prototype._next.call(this, value);\n    };\n    TimeoutWithSubscriber.prototype._unsubscribe = function () {\n        this.action = undefined;\n        this.scheduler = null;\n        this.withObservable = null;\n    };\n    return TimeoutWithSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=timeoutWith.js.map\n"]},"metadata":{},"sourceType":"module"}