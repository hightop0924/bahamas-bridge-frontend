{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function debounce(durationSelector) {\n  return function (source) {\n    return source.lift(new DebounceOperator(durationSelector));\n  };\n}\nvar DebounceOperator = /*@__PURE__*/function () {\n  function DebounceOperator(durationSelector) {\n    this.durationSelector = durationSelector;\n  }\n  DebounceOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));\n  };\n  return DebounceOperator;\n}();\nvar DebounceSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(DebounceSubscriber, _super);\n  function DebounceSubscriber(destination, durationSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.durationSelector = durationSelector;\n    _this.hasValue = false;\n    return _this;\n  }\n  DebounceSubscriber.prototype._next = function (value) {\n    try {\n      var result = this.durationSelector.call(this, value);\n      if (result) {\n        this._tryNext(value, result);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  };\n  DebounceSubscriber.prototype._complete = function () {\n    this.emitValue();\n    this.destination.complete();\n  };\n  DebounceSubscriber.prototype._tryNext = function (value, duration) {\n    var subscription = this.durationSubscription;\n    this.value = value;\n    this.hasValue = true;\n    if (subscription) {\n      subscription.unsubscribe();\n      this.remove(subscription);\n    }\n    subscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n    if (subscription && !subscription.closed) {\n      this.add(this.durationSubscription = subscription);\n    }\n  };\n  DebounceSubscriber.prototype.notifyNext = function () {\n    this.emitValue();\n  };\n  DebounceSubscriber.prototype.notifyComplete = function () {\n    this.emitValue();\n  };\n  DebounceSubscriber.prototype.emitValue = function () {\n    if (this.hasValue) {\n      var value = this.value;\n      var subscription = this.durationSubscription;\n      if (subscription) {\n        this.durationSubscription = undefined;\n        subscription.unsubscribe();\n        this.remove(subscription);\n      }\n      this.value = undefined;\n      this.hasValue = false;\n      _super.prototype._next.call(this, value);\n    }\n  };\n  return DebounceSubscriber;\n}(SimpleOuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/operators/debounce.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function debounce(durationSelector) {\n    return function (source) { return source.lift(new DebounceOperator(durationSelector)); };\n}\nvar DebounceOperator = /*@__PURE__*/ (function () {\n    function DebounceOperator(durationSelector) {\n        this.durationSelector = durationSelector;\n    }\n    DebounceOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));\n    };\n    return DebounceOperator;\n}());\nvar DebounceSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DebounceSubscriber, _super);\n    function DebounceSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        return _this;\n    }\n    DebounceSubscriber.prototype._next = function (value) {\n        try {\n            var result = this.durationSelector.call(this, value);\n            if (result) {\n                this._tryNext(value, result);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DebounceSubscriber.prototype._complete = function () {\n        this.emitValue();\n        this.destination.complete();\n    };\n    DebounceSubscriber.prototype._tryNext = function (value, duration) {\n        var subscription = this.durationSubscription;\n        this.value = value;\n        this.hasValue = true;\n        if (subscription) {\n            subscription.unsubscribe();\n            this.remove(subscription);\n        }\n        subscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n        if (subscription && !subscription.closed) {\n            this.add(this.durationSubscription = subscription);\n        }\n    };\n    DebounceSubscriber.prototype.notifyNext = function () {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            var value = this.value;\n            var subscription = this.durationSubscription;\n            if (subscription) {\n                this.durationSubscription = undefined;\n                subscription.unsubscribe();\n                this.remove(subscription);\n            }\n            this.value = undefined;\n            this.hasValue = false;\n            _super.prototype._next.call(this, value);\n        }\n    };\n    return DebounceSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=debounce.js.map\n"]},"metadata":{},"sourceType":"module"}