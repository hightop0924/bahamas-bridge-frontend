{"ast":null,"code":"var _jsxFileName = \"/home/hightop/bahamas_bridge/omnibridge-ui/packages/dapp/src/components/common/AddToMetamask.jsx\",\n  _s = $RefreshSig$();\nimport { Image, useDisclosure, useToast } from '@chakra-ui/react';\nimport MetamaskFox from \"assets/metamask-fox.svg\";\nimport { AddToMetamaskModal } from 'components/modals/AddToMetamaskModal';\nimport { useWeb3Context } from 'contexts/Web3Context';\nimport { ADDRESS_ZERO } from 'lib/constants';\nimport { getNetworkName, logError } from 'lib/helpers';\nimport { addTokenToMetamask } from 'lib/metamask';\nimport React, { useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AddToMetamask = ({\n  token,\n  asModal = false,\n  ...props\n}) => {\n  _s();\n  const {\n    providerChainId,\n    isMetamask\n  } = useWeb3Context();\n  const toast = useToast();\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const showError = useCallback(msg => {\n    if (msg) {\n      toast({\n        title: 'Error: Unable to add token',\n        description: msg,\n        status: 'error',\n        isClosable: 'true'\n      });\n    }\n  }, [toast]);\n  const addToken = useCallback(async () => {\n    if (providerChainId !== token.chainId) {\n      showError(`Please switch wallet to ${getNetworkName(token.chainId)}`);\n    } else {\n      await addTokenToMetamask(token).catch(metamaskError => {\n        logError({\n          metamaskError\n        });\n        if (metamaskError && metamaskError.message) {\n          showError(`Please add the token ${token.address} manually in the wallet app. Got message: \"${metamaskError.message}\"`);\n        }\n      });\n    }\n  }, [showError, token, providerChainId]);\n  const onClick = useCallback(() => {\n    if (asModal) {\n      onOpen();\n    } else {\n      addToken();\n    }\n  }, [onOpen, asModal, addToken]);\n  return isMetamask ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [token.address !== ADDRESS_ZERO && /*#__PURE__*/_jsxDEV(Image, {\n      cursor: \"pointer\",\n      src: MetamaskFox,\n      alt: \"metamask-fox\",\n      onClick: onClick,\n      w: \"1rem\",\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this), asModal && isOpen && /*#__PURE__*/_jsxDEV(AddToMetamaskModal, {\n      isOpen: isOpen,\n      onClose: onClose,\n      token: token\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true) : null;\n};\n_s(AddToMetamask, \"Yfqeo9APIwsJi6x9SlgNpWvoCZI=\", false, function () {\n  return [useWeb3Context, useToast, useDisclosure];\n});\n_c = AddToMetamask;\nvar _c;\n$RefreshReg$(_c, \"AddToMetamask\");","map":{"version":3,"names":["Image","useDisclosure","useToast","MetamaskFox","AddToMetamaskModal","useWeb3Context","ADDRESS_ZERO","getNetworkName","logError","addTokenToMetamask","React","useCallback","jsxDEV","_jsxDEV","Fragment","_Fragment","AddToMetamask","token","asModal","props","_s","providerChainId","isMetamask","toast","isOpen","onOpen","onClose","showError","msg","title","description","status","isClosable","addToken","chainId","catch","metamaskError","message","address","onClick","children","cursor","src","alt","w","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/hightop/bahamas_bridge/omnibridge-ui/packages/dapp/src/components/common/AddToMetamask.jsx"],"sourcesContent":["import { Image, useDisclosure, useToast } from '@chakra-ui/react';\nimport MetamaskFox from 'assets/metamask-fox.svg';\nimport { AddToMetamaskModal } from 'components/modals/AddToMetamaskModal';\nimport { useWeb3Context } from 'contexts/Web3Context';\nimport { ADDRESS_ZERO } from 'lib/constants';\nimport { getNetworkName, logError } from 'lib/helpers';\nimport { addTokenToMetamask } from 'lib/metamask';\nimport React, { useCallback } from 'react';\n\nexport const AddToMetamask = ({ token, asModal = false, ...props }) => {\n  const { providerChainId, isMetamask } = useWeb3Context();\n  const toast = useToast();\n  const { isOpen, onOpen, onClose } = useDisclosure();\n\n  const showError = useCallback(\n    msg => {\n      if (msg) {\n        toast({\n          title: 'Error: Unable to add token',\n          description: msg,\n          status: 'error',\n          isClosable: 'true',\n        });\n      }\n    },\n    [toast],\n  );\n\n  const addToken = useCallback(async () => {\n    if (providerChainId !== token.chainId) {\n      showError(`Please switch wallet to ${getNetworkName(token.chainId)}`);\n    } else {\n      await addTokenToMetamask(token).catch(metamaskError => {\n        logError({ metamaskError });\n        if (metamaskError && metamaskError.message) {\n          showError(\n            `Please add the token ${token.address} manually in the wallet app. Got message: \"${metamaskError.message}\"`,\n          );\n        }\n      });\n    }\n  }, [showError, token, providerChainId]);\n\n  const onClick = useCallback(() => {\n    if (asModal) {\n      onOpen();\n    } else {\n      addToken();\n    }\n  }, [onOpen, asModal, addToken]);\n\n  return isMetamask ? (\n    <>\n      {token.address !== ADDRESS_ZERO && (\n        <Image\n          cursor=\"pointer\"\n          src={MetamaskFox}\n          alt=\"metamask-fox\"\n          onClick={onClick}\n          w=\"1rem\"\n          {...props}\n        />\n      )}\n      {asModal && isOpen && (\n        <AddToMetamaskModal isOpen={isOpen} onClose={onClose} token={token} />\n      )}\n    </>\n  ) : null;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}